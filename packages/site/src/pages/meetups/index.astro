---
import PageLayout from '../../layouts/PageLayout.astro';
import { getCollection } from 'astro:content';
import MeetupListItem from '../../components/MeetupListItem.astro';
import { getMeetupsCollectionName } from '../../content/config';
import { parseDate } from '../../utils';

const collectionName = getMeetupsCollectionName();
const meetups: any = await getCollection(collectionName);
meetups.sort((a: any, b: any) => {
  return parseDate(b) - parseDate(a);
});
---

<PageLayout>
  <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
    <div
      class="mx-auto max-w-4xl rounded-xl border border-gray-400 bg-gray-50 p-8 sm:px-24"
    >
      <section>
        <ul role="list" class="divide-y divide-gray-100">
          {
            meetups.map((meetup: any) => (
              <MeetupListItem
                name={meetup.data.title}
                location={meetup.data.location}
                date={meetup.data.date}
                time={meetup.data.time}
                organizer={meetup.data.organizer}
                slug={meetup.slug}
              />
            ))
          }
        </ul>
      </section>
    </div>
  </div>
</PageLayout>
